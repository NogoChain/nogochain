# NogoChain 挖矿文档

## 1. 挖矿概述

NogoChain 采用自研的 NogoPow 共识机制，专为 CPU/GPU 挖矿设计，抗 ASIC 且性能友好。

### 1.1 核心参数

- **共识算法**：NogoPow（工作量证明）
- **区块时间**：目标 20 秒/块
- **难度调整**：每 10 个区块调整一次，±50%
- **区块奖励**：初始 8 NOGO，每 500 万区块减产 20%，最低 0.1 NOGO
- **交易费用**：全部归矿工所有

### 1.2 挖矿优势

- **抗 ASIC**：随机内存访问模式，数据集 ≤2GB
- **CPU/GPU 友好**：无特殊指令，多线程优化
- **低功耗**：相比传统 PoW 算法功耗更低
- **公平性**：普通硬件即可参与，去中心化程度高

## 2. 挖矿方式

### 2.1 内置挖矿

NogoChain 节点内置挖矿功能，可通过配置文件启用。

**使用启动脚本**：
```bash
# Windows
start-mainnet-node.bat --miner
```

**手动配置**：
修改 `mainnet/config/node_config.json` 文件，添加挖矿配置：

**启动命令**：
```bash
# Windows
./nogochain.exe --datadir mainnet/data --config mainnet/config/node_config.json --mine --miner.threads=4 --miner.coinbase=0xYOUR_ADDRESS
```

### 2.2 外部挖矿

NogoChain 支持标准 Stratum 协议，可使用第三方挖矿软件。

**挖矿软件配置**：
- URL: `stratum+tcp://YOUR_NODE_IP:3333`
- 用户名: 钱包地址
- 密码: 任意（可用于标识矿工）

### 2.3 挖矿池

使用官方提供的矿池组件搭建挖矿池：

**快速部署**：
```bash
# Windows
start-mainnet-pool.bat
```

**手动配置**：
修改 `mainnet/config/mining_pool_config.json` 文件，配置矿池参数：

**启动命令**：
```bash
# Windows
./nogopool.exe --datadir mainnet/data --config mainnet/config/mining_pool_config.json
```

**矿工连接**：
- Stratum URL: `stratum+tcp://POOL_IP:3333`
- 用户名: 钱包地址
- 密码: 矿工标识

## 3. 硬件要求

### 3.1 CPU 挖矿

- **推荐配置**：
  - 4 核以上 CPU
  - 8GB+ 内存
  - SSD 存储
- **性能参考**：
  - Intel i5: ~100-200 H/s
  - Intel i7: ~200-400 H/s
  - AMD Ryzen 5: ~300-500 H/s

### 3.2 GPU 挖矿

- **推荐配置**：
  - NVIDIA GTX 1060 或 AMD RX 580 以上
  - 8GB+ 显存
  - 适当散热
- **性能参考**：
  - NVIDIA GTX 1660: ~1000-1500 H/s
  - NVIDIA RTX 2060: ~2000-3000 H/s
  - AMD RX 5700 XT: ~3000-4000 H/s

### 3.3 网络要求

- **带宽**：至少 1Mbps 上行/下行
- **延迟**：越低越好，推荐 < 50ms
- **稳定性**：7x24 小时稳定运行

## 4. 挖矿优化

### 4.1 软件优化

- **线程数调整**：根据 CPU 核心数设置，通常为物理核心数
- **内存优化**：关闭不必要的应用程序，释放内存
- **系统优化**：
  - 关闭系统自动更新
  - 禁用不必要的服务
  - 优化电源计划为高性能

### 4.2 硬件优化

- **散热**：确保设备散热良好，避免过热降频
- **电源**：使用稳定的电源供应，避免电压波动
- **网络**：使用有线网络连接，减少网络波动

### 4.3 挖矿策略

- **持续运行**：挖矿是长期过程，建议 24/7 运行
- **定期检查**：监控挖矿状态和收益
- **风险控制**：合理配置硬件，避免过度投资

## 5. 挖矿监控

### 5.1 内置监控

NogoChain 节点提供以下监控接口：

- **RPC 接口**：`nogo_getMiningInfo` 获取挖矿状态
- **RPC 接口**：`nogo_getDifficulty` 获取当前难度
- **RPC 接口**：`nogo_getWork` 获取挖矿工作
- **日志**：查看节点日志了解挖矿情况
- **指标**：通过 Prometheus 监控挖矿性能

### 5.2 外部监控

- **挖矿软件**：使用支持 NogoChain 的挖矿软件监控
- **矿池监控**：如果加入矿池，使用矿池提供的监控工具
- **第三方工具**：可使用 Grafana + Prometheus 构建监控面板
- **区块浏览器**：通过区块浏览器监控挖矿状态和收益

### 5.3 监控指标

**关键指标**：
- **哈希率**：每秒计算的哈希数量
- **难度**：当前网络难度
- **区块高度**：当前区块高度
- **确认时间**：交易确认时间
- **收益**：挖矿收益统计

## 6. 收益计算

### 6.1 理论收益

**计算公式**：
```
日收益 = (你的哈希率 / 网络总哈希率) * 每日总奖励
每日总奖励 = 8 NOGO * 4320 块/天 * 减产系数
```

**示例**：
- 网络哈希率：100 MH/s
- 你的哈希率：1 MH/s
- 减产系数：1.0（初始阶段）
- 日收益：(1/100) * 8 * 4320 = 345.6 NOGO

### 6.2 实际收益

实际收益可能受以下因素影响：
- 网络难度调整
- 区块确认时间波动
- 交易费用
- 挖矿软件效率
- 硬件稳定性

## 7. 常见问题

### 7.1 挖矿启动问题

- **问题**：挖矿未启动
  **解决**：检查配置文件，确保 miner.enabled = true

- **问题**：哈希率为 0
  **解决**：检查硬件资源，确保 CPU/GPU 正常工作

### 7.2 连接问题

- **问题**：无法连接到 Stratum 服务器
  **解决**：检查网络连接，确认 Stratum 服务已启动

- **问题**：节点同步缓慢
  **解决**：确保网络带宽充足，使用快速同步模式

### 7.3 收益问题

- **问题**：收益低于预期
  **解决**：检查网络哈希率变化，优化挖矿设置

- **问题**：未收到奖励
  **解决**：确认区块已确认，检查钱包地址是否正确

## 8. 安全注意事项

### 8.1 硬件安全

- 避免过度超频，防止硬件损坏
- 确保设备通风良好，避免火灾风险
- 定期检查硬件状态，预防故障

### 8.2 软件安全

- 仅从官方渠道下载挖矿软件
- 定期更新挖矿软件和节点版本
- 警惕钓鱼网站和恶意软件

### 8.3 钱包安全

- 使用硬件钱包存储大额 NOGO
- 定期备份钱包私钥
- 避免在公共设备上访问钱包

## 9. 未来发展

### 9.1 挖矿算法升级

NogoChain 团队将持续优化 NogoPow 算法，保持其抗 ASIC 特性和效率。

### 9.2 生态激励

- 未来可能推出挖矿激励计划
- 支持去中心化应用生态建设
- 探索可持续的挖矿经济模型

## 10. 参考资料

- [NogoChain 官方文档](https://docs.nogochain.org)
- [生产环境部署教程](DEPLOYMENT_PRODUCTION.md) - 详细的生产环境部署指南
- [测试网络部署教程](DEPLOYMENT_TESTNET.md) - 快速测试网络部署指南
- [API 文档](API.md) - RPC 接口详细说明
- [架构文档](ARCHITECTURE.md) - 系统架构设计
- [部署文档](DEPLOYMENT.md) - 节点部署和配置
- [挖矿软件推荐](https://github.com/nogochain/mining-tools)
- [硬件兼容性列表](https://github.com/nogochain/hardware-compatibility)